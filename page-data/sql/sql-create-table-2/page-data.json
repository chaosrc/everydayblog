{"componentChunkName":"component---src-templates-blog-post-js","path":"/sql/sql-create-table-2/","webpackCompilationHash":"244ee56c36e36966767c","result":{"data":{"site":{"siteMetadata":{"title":"温故而知新","author":"chao"}},"markdownRemark":{"id":"8b44da92-cb8c-55ca-a544-97a2e63835a3","excerpt":"创建和操控表（二）更新表使用 ALTER TABLE 可以更新表的定义，以下是变更表时需要考虑的事情：理想情况下不要在表中包含数据时对其进行变更所有数据库都允许给现有的表增加列，但是对所增加列的数据类型以及 NULL 和 DEFAULT…","html":"<h2>创建和操控表（二）</h2>\n<h4>更新表</h4>\n<p>使用 ALTER TABLE 可以更新表的定义，以下是变更表时需要考虑的事情：</p>\n<ul>\n<li>理想情况下不要在表中包含数据时对其进行变更</li>\n<li>所有数据库都允许给现有的表增加列，但是对所增加列的数据类型以及 NULL 和 DEFAULT 的使用有限制</li>\n<li>很多数据库不允许删除或更改表中的列</li>\n<li>多数数据库允许重命名表中的列</li>\n<li>很多数据库限制对已经填有数据列的更改，而不限制对未填数据列的修改</li>\n</ul>\n<p>使用 ALTER TABLE 更改表结构时，需要给出以下信息：</p>\n<ul>\n<li>在 ALTER TABLE 后面给出表名，且该表必须存在</li>\n<li>列出要做哪些修改</li>\n</ul>\n<p>下面对 Vendors 表进行更改</p>\n<p>输入</p>\n<div class=\"gatsby-highlight\" data-language=\"sql\"><pre class=\"language-sql\"><code class=\"language-sql\"><span class=\"token keyword\">ALTER</span> <span class=\"token keyword\">TABLE</span> Vendors\n<span class=\"token keyword\">ADD</span> vend_phone <span class=\"token keyword\">CHAR</span><span class=\"token punctuation\">(</span><span class=\"token number\">20</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></code></pre></div>\n<p>上面的 SQL 语句对 Vendors 表增加了 vend_phone 列，数据类型为 CHAR</p>\n<p>删除列 (并非对所有数据库都有效)</p>\n<div class=\"gatsby-highlight\" data-language=\"sql\"><pre class=\"language-sql\"><code class=\"language-sql\"><span class=\"token keyword\">ALTER</span> <span class=\"token keyword\">TABLE</span> Vendors\n<span class=\"token keyword\">DROP</span> <span class=\"token keyword\">COLUMN</span> vend_phone<span class=\"token punctuation\">;</span></code></pre></div>\n<p>复杂的表结构变更一般需要手动删除过程，包括以下步骤：</p>\n<ul>\n<li>使用新的列布局创建一个新表</li>\n<li>使用 SELECT INTO 语句从旧表中复制数据到新表</li>\n<li>检验包含所需数据的新表</li>\n<li>重命名旧表</li>\n<li>用原来旧表的名字重命名新表</li>\n<li>根据需要重新创建触发器、存储过程、索引和外键</li>\n</ul>\n<blockquote>\n<p>使用 ALTER TABLE 时要极其小心，应该在改动前做完整的备份</p>\n</blockquote>\n<h4>删除表</h4>\n<p>使用 DROP TABLE 可以删除表，删除整个表而不是其内容</p>\n<p>输入</p>\n<div class=\"gatsby-highlight\" data-language=\"sql\"><pre class=\"language-sql\"><code class=\"language-sql\"><span class=\"token keyword\">DROP</span> <span class=\"token keyword\">TABLE</span> CustCopy<span class=\"token punctuation\">;</span></code></pre></div>\n<p>上面的语句删除了 CustCopy 表。删除表没有确认，也不能撤销，执行这条语句将永久删除该表</p>\n<h4>重命名表</h4>\n<p>每个数据库对表的重命名支持有所不同，没有严格的标准。MySQL、Oracle 和 PostgreSQL 使用 RENAME 语句</p>\n<div class=\"gatsby-highlight\" data-language=\"sql\"><pre class=\"language-sql\"><code class=\"language-sql\"><span class=\"token keyword\">RENAME</span> <span class=\"token keyword\">TABLE</span> Vendors <span class=\"token keyword\">TO</span> vendors</code></pre></div>\n<p>SQLite 中使用 ALTER TABLE 语句</p>\n<div class=\"gatsby-highlight\" data-language=\"sql\"><pre class=\"language-sql\"><code class=\"language-sql\"><span class=\"token keyword\">ALTER</span> <span class=\"token keyword\">TABLE</span> Vendors\n<span class=\"token keyword\">RENAME</span> <span class=\"token keyword\">TO</span> vendors</code></pre></div>","frontmatter":{"title":"创建和操控表（二）","date":null,"description":null}}},"pageContext":{"isCreatedByStatefulCreatePages":false,"slug":"/sql/sql-create-table-2/","previous":{"fields":{"slug":"/go/golang-structure-4/"},"frontmatter":{"title":"Go 程序结构（四）"}},"next":{"fields":{"slug":"/promise2/"},"frontmatter":{"title":""}}}}}