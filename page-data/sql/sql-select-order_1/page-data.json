{"componentChunkName":"component---src-templates-blog-post-js","path":"/sql/sql-select-order_1/","webpackCompilationHash":"244ee56c36e36966767c","result":{"data":{"site":{"siteMetadata":{"title":"温故而知新","author":"chao"}},"markdownRemark":{"id":"87c47241-9472-5260-baf0-2fa67ba87f76","excerpt":"排序检索数据使用 SELECT 语句的 ORDER BY 子句可以对检索数据进行排序排序数据使用 SQL…","html":"<h2>排序检索数据</h2>\n<p>使用 SELECT 语句的 ORDER BY 子句可以对检索数据进行排序</p>\n<h4>排序数据</h4>\n<p>使用 SQL 语句进行查询表中的某个列，并没有特定的顺序，比如</p>\n<p>输入</p>\n<div class=\"gatsby-highlight\" data-language=\"sql\"><pre class=\"language-sql\"><code class=\"language-sql\"><span class=\"token keyword\">SELECT</span> prod_name\n<span class=\"token keyword\">FROM</span> Products<span class=\"token punctuation\">;</span></code></pre></div>\n<p>输出</p>\n<div class=\"gatsby-highlight\" data-language=\"sql\"><pre class=\"language-sql\"><code class=\"language-sql\"><span class=\"token number\">8</span> inch teddy bear\n<span class=\"token number\">12</span> inch teddy bear\n<span class=\"token number\">18</span> inch teddy bear\nFish bean bag toy\nBird bean bag toy\nRabbit bean bag toy\nRaggedy Ann\nKing doll\nQueen doll</code></pre></div>\n<p>上面检索出来的数据并不是随机显示的，如果不排序数据一般以它在底层表中出现的顺序显示，\n这有可能是添加数据到表中的顺序，但是如果数据进行过更新或者删除，那么这个顺序可能会受到数据库重用存储空间方式的影响</p>\n<p>使用 ORDER BY 子句可以对一个或多个列进行排序</p>\n<p>输入</p>\n<div class=\"gatsby-highlight\" data-language=\"sql\"><pre class=\"language-sql\"><code class=\"language-sql\"><span class=\"token keyword\">SELECT</span> prod_name\n<span class=\"token keyword\">FROM</span> Products\n<span class=\"token keyword\">ORDER</span> <span class=\"token keyword\">BY</span> prod_name</code></pre></div>\n<p>输出</p>\n<div class=\"gatsby-highlight\" data-language=\"sql\"><pre class=\"language-sql\"><code class=\"language-sql\"><span class=\"token number\">12</span> inch teddy bear\n<span class=\"token number\">18</span> inch teddy bear\n<span class=\"token number\">8</span> inch teddy bear\nBird bean bag toy\nFish bean bag toy\nKing doll\nQueen doll\nRabbit bean bag toy\nRaggedy Ann</code></pre></div>\n<blockquote>\n<p>在指定一条 ORDER BY 子句时，应该保证它是 SELECT 语句中最后一条子句，\n如果不是则会报错\nORDER BY 子句中可以使用非选择列进行排序</p>\n</blockquote>\n<h4>按多个列进行排序</h4>\n<p>按多个列进行排序，在 ORDER BY 子句中指定多个列名用逗号隔开</p>\n<p>输入</p>\n<div class=\"gatsby-highlight\" data-language=\"sql\"><pre class=\"language-sql\"><code class=\"language-sql\"><span class=\"token keyword\">SELECT</span> prod_id<span class=\"token punctuation\">,</span> prod_price<span class=\"token punctuation\">,</span> prod_name\n<span class=\"token keyword\">FROM</span> Products\n<span class=\"token keyword\">ORDER</span> <span class=\"token keyword\">BY</span> prod_price<span class=\"token punctuation\">,</span> prod_name<span class=\"token punctuation\">;</span></code></pre></div>\n<p>输出</p>\n<div class=\"gatsby-highlight\" data-language=\"sql\"><pre class=\"language-sql\"><code class=\"language-sql\">BNBG02<span class=\"token operator\">|</span><span class=\"token number\">3.49</span><span class=\"token operator\">|</span>Bird bean bag toy\nBNBG01<span class=\"token operator\">|</span><span class=\"token number\">3.49</span><span class=\"token operator\">|</span>Fish bean bag toy\nBNBG03<span class=\"token operator\">|</span><span class=\"token number\">3.49</span><span class=\"token operator\">|</span>Rabbit bean bag toy\nRGAN01<span class=\"token operator\">|</span><span class=\"token number\">4.99</span><span class=\"token operator\">|</span>Raggedy Ann\nBR01<span class=\"token operator\">|</span><span class=\"token number\">5.99</span><span class=\"token operator\">|</span><span class=\"token number\">8</span> inch teddy bear\nBR02<span class=\"token operator\">|</span><span class=\"token number\">8.99</span><span class=\"token operator\">|</span><span class=\"token number\">12</span> inch teddy bear\nRYL01<span class=\"token operator\">|</span><span class=\"token number\">9.49</span><span class=\"token operator\">|</span>King doll\nRYL02<span class=\"token operator\">|</span><span class=\"token number\">9.49</span><span class=\"token operator\">|</span>Queen doll\nBR03<span class=\"token operator\">|</span><span class=\"token number\">11.99</span><span class=\"token operator\">|</span><span class=\"token number\">18</span> inch teddy bear</code></pre></div>\n<p>多行排序时，排序的顺序完全按照规定进行，比如上面的例子中，仅在 prod<em>price 相同时，才会对 prod</em>name 进行排序，\n如果 prod<em>price 列中所有的值都是唯一的，则不会按照 prod</em>name 进行排序</p>\n<h4>按列的位置进行排序</h4>\n<p>除了能用列名来指出排序顺序以外，ORDER BY 还可以使用相对位置进行排序</p>\n<p>输入</p>\n<div class=\"gatsby-highlight\" data-language=\"sql\"><pre class=\"language-sql\"><code class=\"language-sql\"><span class=\"token keyword\">SELECT</span> prod_id<span class=\"token punctuation\">,</span> prod_price<span class=\"token punctuation\">,</span> prod_name\n<span class=\"token keyword\">FROM</span> Products\n<span class=\"token keyword\">ORDER</span> <span class=\"token keyword\">BY</span> <span class=\"token number\">2</span><span class=\"token punctuation\">,</span> <span class=\"token number\">3</span><span class=\"token punctuation\">;</span></code></pre></div>\n<p>输出</p>\n<div class=\"gatsby-highlight\" data-language=\"sql\"><pre class=\"language-sql\"><code class=\"language-sql\">BNBG02<span class=\"token operator\">|</span><span class=\"token number\">3.49</span><span class=\"token operator\">|</span>Bird bean bag toy\nBNBG01<span class=\"token operator\">|</span><span class=\"token number\">3.49</span><span class=\"token operator\">|</span>Fish bean bag toy\nBNBG03<span class=\"token operator\">|</span><span class=\"token number\">3.49</span><span class=\"token operator\">|</span>Rabbit bean bag toy\nRGAN01<span class=\"token operator\">|</span><span class=\"token number\">4.99</span><span class=\"token operator\">|</span>Raggedy Ann\nBR01<span class=\"token operator\">|</span><span class=\"token number\">5.99</span><span class=\"token operator\">|</span><span class=\"token number\">8</span> inch teddy bear\nBR02<span class=\"token operator\">|</span><span class=\"token number\">8.99</span><span class=\"token operator\">|</span><span class=\"token number\">12</span> inch teddy bear\nRYL01<span class=\"token operator\">|</span><span class=\"token number\">9.49</span><span class=\"token operator\">|</span>King doll\nRYL02<span class=\"token operator\">|</span><span class=\"token number\">9.49</span><span class=\"token operator\">|</span>Queen doll\nBR03<span class=\"token operator\">|</span><span class=\"token number\">11.99</span><span class=\"token operator\">|</span><span class=\"token number\">18</span> inch teddy bear</code></pre></div>\n<p><code class=\"language-text\">ORDER BY 2, 3</code> 中的 2 和 3 分别对应于选择的列的相对位置而不是列名，2 表示按照 prod<em>price 进行排序，3 表示按照 prod</em>name 进行排序</p>\n<blockquote>\n<p>使用相对位置排序的好处是不用输入列名，但是也容易出错，对 SELECT 列进行更改时容易忘记对 ORDER BY 子句进行更改。\n对于不在 SELECT 列中的列显然也无法使用这种排序方式</p>\n</blockquote>\n<h4>指定排序方向</h4>\n<p>ORDER BY 子句的排序默认是升序排序（从 A 到 Z），如果要使用降序排序可以使用 DESC 关键词</p>\n<p>输入</p>\n<div class=\"gatsby-highlight\" data-language=\"sql\"><pre class=\"language-sql\"><code class=\"language-sql\"><span class=\"token keyword\">SELECT</span> prod_id<span class=\"token punctuation\">,</span> prod_price<span class=\"token punctuation\">,</span> prod_name\n<span class=\"token keyword\">FROM</span> Products\n<span class=\"token keyword\">ORDER</span> <span class=\"token keyword\">BY</span> prod_price <span class=\"token keyword\">DESC</span></code></pre></div>\n<p>输出</p>\n<div class=\"gatsby-highlight\" data-language=\"sql\"><pre class=\"language-sql\"><code class=\"language-sql\">BR03<span class=\"token operator\">|</span><span class=\"token number\">11.99</span><span class=\"token operator\">|</span><span class=\"token number\">18</span> inch teddy bear\nRYL01<span class=\"token operator\">|</span><span class=\"token number\">9.49</span><span class=\"token operator\">|</span>King doll\nRYL02<span class=\"token operator\">|</span><span class=\"token number\">9.49</span><span class=\"token operator\">|</span>Queen doll\nBR02<span class=\"token operator\">|</span><span class=\"token number\">8.99</span><span class=\"token operator\">|</span><span class=\"token number\">12</span> inch teddy bear\nBR01<span class=\"token operator\">|</span><span class=\"token number\">5.99</span><span class=\"token operator\">|</span><span class=\"token number\">8</span> inch teddy bear\nRGAN01<span class=\"token operator\">|</span><span class=\"token number\">4.99</span><span class=\"token operator\">|</span>Raggedy Ann\nBNBG01<span class=\"token operator\">|</span><span class=\"token number\">3.49</span><span class=\"token operator\">|</span>Fish bean bag toy\nBNBG02<span class=\"token operator\">|</span><span class=\"token number\">3.49</span><span class=\"token operator\">|</span>Bird bean bag toy\nBNBG03<span class=\"token operator\">|</span><span class=\"token number\">3.49</span><span class=\"token operator\">|</span>Rabbit bean bag toy</code></pre></div>\n<p>上面的语句使用 DESC 关键词对 prod_price 进行降序排列</p>\n<p>如果对多列进行排序，在需要指定排序方向的列上加上 DESC/ASC 关键词，DESC/ASC 关键词只作用于直接位于其前面的列</p>\n<p>输入</p>\n<div class=\"gatsby-highlight\" data-language=\"sql\"><pre class=\"language-sql\"><code class=\"language-sql\"><span class=\"token keyword\">SELECT</span> prod_id<span class=\"token punctuation\">,</span> prod_price<span class=\"token punctuation\">,</span> prod_name\n<span class=\"token keyword\">FROM</span> Products\n<span class=\"token keyword\">ORDER</span> <span class=\"token keyword\">BY</span> prod_price <span class=\"token keyword\">DESC</span><span class=\"token punctuation\">,</span> prod_name<span class=\"token punctuation\">;</span></code></pre></div>\n<p>输出</p>\n<div class=\"gatsby-highlight\" data-language=\"sql\"><pre class=\"language-sql\"><code class=\"language-sql\">BR03<span class=\"token operator\">|</span><span class=\"token number\">11.99</span><span class=\"token operator\">|</span><span class=\"token number\">18</span> inch teddy bear\nRYL01<span class=\"token operator\">|</span><span class=\"token number\">9.49</span><span class=\"token operator\">|</span>King doll\nRYL02<span class=\"token operator\">|</span><span class=\"token number\">9.49</span><span class=\"token operator\">|</span>Queen doll\nBR02<span class=\"token operator\">|</span><span class=\"token number\">8.99</span><span class=\"token operator\">|</span><span class=\"token number\">12</span> inch teddy bear\nBR01<span class=\"token operator\">|</span><span class=\"token number\">5.99</span><span class=\"token operator\">|</span><span class=\"token number\">8</span> inch teddy bear\nRGAN01<span class=\"token operator\">|</span><span class=\"token number\">4.99</span><span class=\"token operator\">|</span>Raggedy Ann\nBNBG02<span class=\"token operator\">|</span><span class=\"token number\">3.49</span><span class=\"token operator\">|</span>Bird bean bag toy\nBNBG01<span class=\"token operator\">|</span><span class=\"token number\">3.49</span><span class=\"token operator\">|</span>Fish bean bag toy\nBNBG03<span class=\"token operator\">|</span><span class=\"token number\">3.49</span><span class=\"token operator\">|</span>Rabbit bean bag toy</code></pre></div>\n<p>上面检索结果中 prod<em>price 使用 DESC 以降序排列，prod</em>name 仍然以默认的升序进行排列</p>","frontmatter":{"title":"排序检索数据","date":"August 30, 2019","description":null}}},"pageContext":{"isCreatedByStatefulCreatePages":false,"slug":"/sql/sql-select-order_1/","previous":{"fields":{"slug":"/sql/sql-select_3/"},"frontmatter":{"title":"数据检索（三）"}},"next":{"fields":{"slug":"/sql/sql-select-filter/"},"frontmatter":{"title":"过滤数据（一）"}}}}}