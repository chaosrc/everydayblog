{"componentChunkName":"component---src-templates-blog-post-js","path":"/sql/sql-collect-function/","webpackCompilationHash":"244ee56c36e36966767c","result":{"data":{"site":{"siteMetadata":{"title":"温故而知新","author":"chao"}},"markdownRemark":{"id":"9ae0b1c8-0d3a-51b5-a8e6-ac3e1ea3324f","excerpt":"集聚函数（一）很多时候我们需要汇总数据而不是检索数据，SQL 语句中提供了一些专门的函数来进行数据汇总常见的数据汇总的案例：确定表中的行数获得某些行的和找出表列的最大值、最小值、平均值等上面的案例都是汇总数据，而不需要检索数据，如果返回实际表中的数据就浪费时间和资源常用的集聚函数函数说明AVG…","html":"<h2>集聚函数（一）</h2>\n<p>很多时候我们需要汇总数据而不是检索数据，SQL 语句中提供了一些专门的函数来进行数据汇总</p>\n<p>常见的数据汇总的案例：</p>\n<ul>\n<li>确定表中的行数</li>\n<li>获得某些行的和</li>\n<li>找出表列的最大值、最小值、平均值等</li>\n</ul>\n<p>上面的案例都是汇总数据，而不需要检索数据，如果返回实际表中的数据就浪费时间和资源</p>\n<p>常用的集聚函数</p>\n<table>\n<thead>\n<tr>\n<th>函数</th>\n<th>说明</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td>AVG()</td>\n<td>返回列的平均值</td>\n</tr>\n<tr>\n<td>COUNT()</td>\n<td>返回行数</td>\n</tr>\n<tr>\n<td>MAX()</td>\n<td>返回列的最大只能</td>\n</tr>\n<tr>\n<td>MIN()</td>\n<td>返回列的最小值</td>\n</tr>\n<tr>\n<td>SUM()</td>\n<td>返回列的和</td>\n</tr>\n</tbody>\n</table>\n<h4>AVG 函数</h4>\n<p>AVG() 函数通过对表中行数计数并计算列之和，求该列的平均值。使用 AVG() 函数可以返回所有列或特定列的平均值</p>\n<p>输入</p>\n<div class=\"gatsby-highlight\" data-language=\"sql\"><pre class=\"language-sql\"><code class=\"language-sql\"><span class=\"token keyword\">SELECT</span> <span class=\"token function\">AVG</span><span class=\"token punctuation\">(</span>prod_price<span class=\"token punctuation\">)</span> <span class=\"token keyword\">AS</span> avg_price\n<span class=\"token keyword\">FROM</span> Products<span class=\"token punctuation\">;</span></code></pre></div>\n<p>输出</p>\n<div class=\"gatsby-highlight\" data-language=\"sql\"><pre class=\"language-sql\"><code class=\"language-sql\"><span class=\"token number\">6.82333333333333</span></code></pre></div>\n<p>上面的 SELECT 语句返回值 avg_price 是 Products 表中所有产品的平均价格</p>\n<p>AVG() 函数也可以返回特定列或行的平均值</p>\n<p>输入</p>\n<div class=\"gatsby-highlight\" data-language=\"sql\"><pre class=\"language-sql\"><code class=\"language-sql\"><span class=\"token keyword\">SELECT</span> <span class=\"token function\">AVG</span><span class=\"token punctuation\">(</span>prod_price<span class=\"token punctuation\">)</span> <span class=\"token keyword\">AS</span> avg_price\n<span class=\"token keyword\">FROM</span> Products\n<span class=\"token keyword\">WHERE</span> vend_id <span class=\"token operator\">=</span> <span class=\"token string\">'DLL01'</span><span class=\"token punctuation\">;</span></code></pre></div>\n<p>输出</p>\n<div class=\"gatsby-highlight\" data-language=\"sql\"><pre class=\"language-sql\"><code class=\"language-sql\"><span class=\"token number\">3.865</span></code></pre></div>\n<p>这条 SQL 语句中使用 WHERE 子句过滤出了 vend<em>id 为 DLL01 的产品，因此 AVG() 函数计算出来的结果也只是所有 vend</em>id 为 DLL01 的产品的平均值</p>\n<h4>COUNT() 函数</h4>\n<p>使用 COUNT() 函数可以计算表中的行数或者符号特定条件的行数</p>\n<p>输入</p>\n<div class=\"gatsby-highlight\" data-language=\"sql\"><pre class=\"language-sql\"><code class=\"language-sql\"> <span class=\"token keyword\">SELECT</span> <span class=\"token function\">COUNT</span><span class=\"token punctuation\">(</span><span class=\"token operator\">*</span><span class=\"token punctuation\">)</span> <span class=\"token keyword\">AS</span> num\n <span class=\"token keyword\">FROM</span> Customers<span class=\"token punctuation\">;</span></code></pre></div>\n<p>输出</p>\n<div class=\"gatsby-highlight\" data-language=\"sql\"><pre class=\"language-sql\"><code class=\"language-sql\"><span class=\"token number\">5</span></code></pre></div>\n<p>上面的 SQL 使用 COUNT(*) 对所有行进行计数，返回结果为 5，一共有 5 条数据</p>\n<p>下面对特定的行进行计数</p>\n<p>输入</p>\n<div class=\"gatsby-highlight\" data-language=\"sql\"><pre class=\"language-sql\"><code class=\"language-sql\"><span class=\"token keyword\">SELECT</span> <span class=\"token function\">COUNT</span><span class=\"token punctuation\">(</span>cust_email<span class=\"token punctuation\">)</span> <span class=\"token keyword\">AS</span> num\n<span class=\"token keyword\">FROM</span> Customers<span class=\"token punctuation\">;</span></code></pre></div>\n<p>输出</p>\n<div class=\"gatsby-highlight\" data-language=\"sql\"><pre class=\"language-sql\"><code class=\"language-sql\"><span class=\"token number\">3</span></code></pre></div>\n<p>上面的 SQL 语句中使用 COUNT(cust<em>email) 进行计数，只对 cust</em>email 有值的列进行计算，有 cust_email 值的行数为 3</p>","frontmatter":{"title":"集聚函数（一）","date":"September 08, 2019","description":null}}},"pageContext":{"isCreatedByStatefulCreatePages":false,"slug":"/sql/sql-collect-function/","previous":{"fields":{"slug":"/sql/sql-function/"},"frontmatter":{"title":"使用函数处理数据（一）"}},"next":{"fields":{"slug":"/sql/sql-collect-function-2/"},"frontmatter":{"title":"集聚函数（二）"}}}}}