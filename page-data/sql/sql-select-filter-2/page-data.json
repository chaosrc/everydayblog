{"componentChunkName":"component---src-templates-blog-post-js","path":"/sql/sql-select-filter-2/","webpackCompilationHash":"244ee56c36e36966767c","result":{"data":{"site":{"siteMetadata":{"title":"温故而知新","author":"chao"}},"markdownRemark":{"id":"57ef234b-8ceb-5409-8248-c24c518a4148","excerpt":"过滤数据（二）组合 WHERE 子句为了进行更强的过滤控制，SQL 允许多个 WHRER 子句组合，使用 AND 或 OR 分隔。AND 操作符如果要对多个列进行过滤，可以使用 AND 操作符添加多个条件输入输出上面的 SQL 语句检索出供应商为 DLL01 且产品价格小于 4 的所有产品的 id…","html":"<h2>过滤数据（二）</h2>\n<h4>组合 WHERE 子句</h4>\n<p>为了进行更强的过滤控制，SQL 允许多个 WHRER 子句组合，使用 AND 或 OR 分隔。</p>\n<h4>AND 操作符</h4>\n<p>如果要对多个列进行过滤，可以使用 AND 操作符添加多个条件</p>\n<p>输入</p>\n<div class=\"gatsby-highlight\" data-language=\"sql\"><pre class=\"language-sql\"><code class=\"language-sql\"><span class=\"token keyword\">SELECT</span> prod_id<span class=\"token punctuation\">,</span> prod_price<span class=\"token punctuation\">,</span> prod_name\n<span class=\"token keyword\">FROM</span> Products\n<span class=\"token keyword\">WHERE</span> vend_id <span class=\"token operator\">=</span> <span class=\"token string\">'DLL01'</span> <span class=\"token operator\">AND</span> prod_price <span class=\"token operator\">&lt;=</span> <span class=\"token number\">4</span><span class=\"token punctuation\">;</span></code></pre></div>\n<p>输出</p>\n<div class=\"gatsby-highlight\" data-language=\"sql\"><pre class=\"language-sql\"><code class=\"language-sql\">BNBG01<span class=\"token operator\">|</span><span class=\"token number\">3.49</span><span class=\"token operator\">|</span>Fish bean bag toy\nBNBG02<span class=\"token operator\">|</span><span class=\"token number\">3.49</span><span class=\"token operator\">|</span>Bird bean bag toy\nBNBG03<span class=\"token operator\">|</span><span class=\"token number\">3.49</span><span class=\"token operator\">|</span>Rabbit bean bag toy</code></pre></div>\n<p>上面的 SQL 语句检索出供应商为 DLL01 且产品价格小于 4 的所有产品的 id 、价格和名称。WHERE 子句中包含了两个条件，使用 AND 关键词连接，表示检索出同时满足两个条件的行。</p>\n<h4>OR 操作符</h4>\n<p>OR 操作符与 AND 相反，表示检索匹配任意条件的的行。一般在匹配第一个条件后就不在计算第二个条件了。</p>\n<p>输入</p>\n<div class=\"gatsby-highlight\" data-language=\"sql\"><pre class=\"language-sql\"><code class=\"language-sql\"><span class=\"token keyword\">SELECT</span> prod_name<span class=\"token punctuation\">,</span> prod_price\n<span class=\"token keyword\">FROM</span>  Products\n<span class=\"token keyword\">WHERE</span> vend_id <span class=\"token operator\">=</span> <span class=\"token string\">'DLL01'</span> <span class=\"token operator\">OR</span> vend_id <span class=\"token operator\">=</span> <span class=\"token string\">'BRS01'</span><span class=\"token punctuation\">;</span></code></pre></div>\n<p>输出</p>\n<div class=\"gatsby-highlight\" data-language=\"sql\"><pre class=\"language-sql\"><code class=\"language-sql\"><span class=\"token number\">8</span> inch teddy bear<span class=\"token operator\">|</span><span class=\"token number\">5.99</span>\n<span class=\"token number\">12</span> inch teddy bear<span class=\"token operator\">|</span><span class=\"token number\">8.99</span>\n<span class=\"token number\">18</span> inch teddy bear<span class=\"token operator\">|</span><span class=\"token number\">11.99</span>\nFish bean bag toy<span class=\"token operator\">|</span><span class=\"token number\">3.49</span>\nBird bean bag toy<span class=\"token operator\">|</span><span class=\"token number\">3.49</span>\nRabbit bean bag toy<span class=\"token operator\">|</span><span class=\"token number\">3.49</span>\nRaggedy Ann<span class=\"token operator\">|</span><span class=\"token number\">4.99</span></code></pre></div>\n<p>上面的 SQL 语句检索出满足任意 WHERE 子句中指定供应商的所有产品的名称和价格。OR 语句告诉数据库匹配任意条件而不是同时匹配两个条件。</p>\n<h4>求值顺序</h4>\n<p>WHRER 子句可以包含任意数目的 AND 和 OR 操作符，允许两者进行复杂、高级的过滤。</p>\n<p>假如需要列出价格为 10 以上而且由 DLL01 或 BRS01 供应商制造的所有产品。使用下面的 SQL 语句</p>\n<p>输入</p>\n<div class=\"gatsby-highlight\" data-language=\"sql\"><pre class=\"language-sql\"><code class=\"language-sql\"><span class=\"token keyword\">SELECT</span> prod_name<span class=\"token punctuation\">,</span> prod_price\n<span class=\"token keyword\">FROM</span> Products\n<span class=\"token keyword\">WHERE</span> vend_id <span class=\"token operator\">=</span> <span class=\"token string\">'DLL01'</span> <span class=\"token operator\">OR</span> vend_id <span class=\"token operator\">=</span> <span class=\"token string\">'BRS01'</span>\n      <span class=\"token operator\">AND</span> prod_price <span class=\"token operator\">>=</span> <span class=\"token number\">10</span><span class=\"token punctuation\">;</span></code></pre></div>\n<p>输出</p>\n<div class=\"gatsby-highlight\" data-language=\"sql\"><pre class=\"language-sql\"><code class=\"language-sql\"><span class=\"token number\">18</span> inch teddy bear<span class=\"token operator\">|</span><span class=\"token number\">11.99</span>\nFish bean bag toy<span class=\"token operator\">|</span><span class=\"token number\">3.49</span>\nBird bean bag toy<span class=\"token operator\">|</span><span class=\"token number\">3.49</span>\nRabbit bean bag toy<span class=\"token operator\">|</span><span class=\"token number\">3.49</span>\nRaggedy Ann<span class=\"token operator\">|</span><span class=\"token number\">4.99</span></code></pre></div>\n<p>可以看输出结果并不满足要求，有 4 个小于 10 的价格，因为 SQL 在处理 OR 操作符之前会优先处理 AND 操作符，上面的 SQL 语句解释为：检索由供应商为 BRS01 且价格大于等于 10 的所有产品，或者供应商为 DLL01 的所有产品，不管其价格如何。</p>\n<p>解决这个问题的方法是使用圆括号对操作符进行明确的分组</p>\n<p>输入</p>\n<div class=\"gatsby-highlight\" data-language=\"sql\"><pre class=\"language-sql\"><code class=\"language-sql\"><span class=\"token keyword\">SELECT</span> prod_name<span class=\"token punctuation\">,</span> prod_price\n<span class=\"token keyword\">FROM</span> Products\n<span class=\"token keyword\">WHERE</span> <span class=\"token punctuation\">(</span>vend_id <span class=\"token operator\">=</span> <span class=\"token string\">'DLL01'</span> <span class=\"token operator\">or</span> vend_id <span class=\"token operator\">=</span> <span class=\"token string\">'BRS01'</span><span class=\"token punctuation\">)</span>\n       <span class=\"token operator\">AND</span> prod_price <span class=\"token operator\">>=</span> <span class=\"token number\">10</span><span class=\"token punctuation\">;</span></code></pre></div>\n<p>输出</p>\n<div class=\"gatsby-highlight\" data-language=\"sql\"><pre class=\"language-sql\"><code class=\"language-sql\"><span class=\"token number\">18</span> inch teddy bear<span class=\"token operator\">|</span><span class=\"token number\">11.99</span></code></pre></div>\n<p>圆括号具有比 AND 或 OR 更高的求值顺序，所以会先过滤圆括号内的 OR 条件。上面 SQL 语句可以理解为：检索出由供应商 DLL01 或 BRS01 制造且价格大于 10 的所有产品。</p>\n<blockquote>\n<p>为了避免出错或者歧义，应该尽可能的使用圆括号进行操作符分组</p>\n</blockquote>","frontmatter":{"title":"过滤数据（二）","date":"September 01, 2019","description":null}}},"pageContext":{"isCreatedByStatefulCreatePages":false,"slug":"/sql/sql-select-filter-2/","previous":{"fields":{"slug":"/sql/sql-select-filter/"},"frontmatter":{"title":"过滤数据（一）"}},"next":{"fields":{"slug":"/sql/sql-select-filter-3/"},"frontmatter":{"title":"数据过滤（三）"}}}}}