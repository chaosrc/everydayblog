{"componentChunkName":"component---src-templates-blog-post-js","path":"/nodejs/nodejs-web-framework-sails/","webpackCompilationHash":"ec0913081d1c10987813","result":{"data":{"site":{"siteMetadata":{"title":"温故而知新","author":"chao"}},"markdownRemark":{"id":"2d089a7e-2fbf-5b38-bcde-63a6fd3b2203","excerpt":"Node.js Web 框架之 SailsSails 是 Node.js 中最流行的 MVC 框架，类似于 Ruby on Rails。使用 Sails 可以轻松构建企业级的 Node.js Web 服务特点Sails 内置强大的 ROM，提供了简单的数据层访问，无论使用什么数据库都能正常工作自动生成 REST…","html":"<h2>Node.js Web 框架之 Sails</h2>\n<p><img src=\"https://sailsjs.com/images/get_started_hero@2x.png\"></p>\n<p>Sails 是 Node.js 中最流行的 MVC 框架，类似于 Ruby on Rails。使用 Sails 可以轻松构建企业级的 Node.js Web 服务<sup id=\"fnref-1\"><a href=\"#fn-1\" class=\"footnote-ref\">1</a></sup></p>\n<h4>特点</h4>\n<ul>\n<li>Sails 内置强大的 ROM，提供了简单的数据层访问，无论使用什么数据库都能正常工作</li>\n<li>自动生成 REST APIs</li>\n<li>轻松整合 WebSockets</li>\n<li>提供基础的安全性和基于角色的权限控制</li>\n</ul>\n<h4>安装 Sails</h4>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\">$ <span class=\"token function\">npm</span> <span class=\"token function\">install</span> sails -g</code></pre></div>\n<h4>创建 Sails 项目</h4>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\">$ sails new sails-demo</code></pre></div>\n<p><img src=\"https://s2.ax1x.com/2019/07/06/Z0pfjs.png\">\n输入 1 选择 Web App 模版</p>\n<p>Sails 项目目录结构\n<img src=\"https://s2.ax1x.com/2019/07/06/Z0mxr8.png\"></p>\n<p>运行项目</p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">$ sails lift</code></pre></div>\n<p>访问 localhost:1337\n<img src=\"https://s2.ax1x.com/2019/07/06/Z0Cpss.md.png\"></p>\n<p>添加路由</p>\n<p>Sails 中有两种路由：自定义（custom）和自动(automatic)</p>\n<ul>\n<li>自定义路由</li>\n</ul>\n<p>在项目的 config/routes.js 文件中定义</p>\n<div class=\"gatsby-highlight\" data-language=\"javascript\"><pre class=\"language-javascript\"><code class=\"language-javascript\">module<span class=\"token punctuation\">.</span>exports<span class=\"token punctuation\">.</span>routes <span class=\"token operator\">=</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token comment\">//  ╦ ╦╔═╗╔╗ ╔═╗╔═╗╔═╗╔═╗╔═╗</span>\n  <span class=\"token comment\">//  ║║║║╣ ╠╩╗╠═╝╠═╣║ ╦║╣ ╚═╗</span>\n  <span class=\"token comment\">//  ╚╩╝╚═╝╚═╝╩  ╩ ╩╚═╝╚═╝╚═╝</span>\n  <span class=\"token string\">\"GET /\"</span><span class=\"token punctuation\">:</span> <span class=\"token punctuation\">{</span> action<span class=\"token punctuation\">:</span> <span class=\"token string\">\"view-homepage-or-redirect\"</span> <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n  <span class=\"token string\">\"GET /welcome/:unused?\"</span><span class=\"token punctuation\">:</span> <span class=\"token punctuation\">{</span> action<span class=\"token punctuation\">:</span> <span class=\"token string\">\"dashboard/view-welcome\"</span> <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n\n  <span class=\"token string\">\"GET /faq\"</span><span class=\"token punctuation\">:</span> <span class=\"token punctuation\">{</span> action<span class=\"token punctuation\">:</span> <span class=\"token string\">\"view-faq\"</span> <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n\n    <span class=\"token operator\">...</span>\n\n  <span class=\"token comment\">//  ╔═╗╔═╗╦  ╔═╗╔╗╔╔╦╗╔═╗╔═╗╦╔╗╔╔╦╗╔═╗</span>\n  <span class=\"token comment\">//  ╠═╣╠═╝║  ║╣ ║║║ ║║╠═╝║ ║║║║║ ║ ╚═╗</span>\n  <span class=\"token comment\">//  ╩ ╩╩  ╩  ╚═╝╝╚╝═╩╝╩  ╚═╝╩╝╚╝ ╩ ╚═╝</span>\n  <span class=\"token string\">\"/api/v1/account/logout\"</span><span class=\"token punctuation\">:</span> <span class=\"token punctuation\">{</span> action<span class=\"token punctuation\">:</span> <span class=\"token string\">\"account/logout\"</span> <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n  <span class=\"token string\">\"PUT   /api/v1/account/update-password\"</span><span class=\"token punctuation\">:</span> <span class=\"token punctuation\">{</span>\n    action<span class=\"token punctuation\">:</span> <span class=\"token string\">\"account/update-password\"</span><span class=\"token punctuation\">,</span>\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n  <span class=\"token string\">\"PUT   /api/v1/account/update-profile\"</span><span class=\"token punctuation\">:</span> <span class=\"token punctuation\">{</span> action<span class=\"token punctuation\">:</span> <span class=\"token string\">\"account/update-profile\"</span> <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<p>每个路由由左边的<strong>地址</strong>（address）和右边的<strong>目标</strong>（target）组成，<strong>地址</strong>包括URl和可选的HTTP方法，<strong>目标</strong>可以是控制层的<code class=\"language-text\">action</code>，也可以直接指向 View 层的页面</p>\n<ul>\n<li>自动生成路由</li>\n</ul>\n<p>如何 URL 不匹配自定义的路由 Sails 会去匹配自动生成的路由，自动生成的路由主要包括两种：控制层、模型层生成的RESTful API 和静态文件比如CSS、图片、js等</p>\n<p>对比之前的几个 Node.js Web 框架，显然 Sails 有更加完整的功能和一套自己的规范，功能强大同时也有一定的学习成本 </p>\n<div class=\"footnotes\">\n<hr>\n<ol>\n<li id=\"fn-1\">\n<p><a href=\"https://sailsjs.com/\">https://sailsjs.com/</a></p>\n<a href=\"#fnref-1\" class=\"footnote-backref\">↩</a>\n</li>\n</ol>\n</div>","frontmatter":{"title":"Node.js Web 框架之 Sails","date":"July 06, 2019","description":null}}},"pageContext":{"isCreatedByStatefulCreatePages":false,"slug":"/nodejs/nodejs-web-framework-sails/","previous":{"fields":{"slug":"/nodejs/nodejs-web-framework-restify/"},"frontmatter":{"title":"Node.js Web 框架之 Restify"}},"next":{"fields":{"slug":"/nodejs/nodejs-web-framework-nest/"},"frontmatter":{"title":"Node.js Web 框架 Nest"}}}}}