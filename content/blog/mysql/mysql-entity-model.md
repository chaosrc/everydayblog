---
title: 实体关系模型
date: 2019-10-02
---


## 实体关系模型

通常来说数据库存储不同对象或实体的信息，以及它们之间的关联或者关系。比如一个学校的数据库可能会存储学生、课程以及注册信息，学生和课程是实体，而注册信息是学生和课程之间的关系

一个流行的概念设计是实体关系模型，它可以帮助我们将需求转变为实体和关系描述



#### 实体的呈现

为了帮助可视化设计，实体关系模型需要画出实体关系模型（ER）图表。在 ER 图中，一个实体集合用包含实体名称的矩形表示

通常我们使用数据库存储实体某些的特征或属性，属性描述了它们所属的实体。属性也可以是更小的部分组成，比如家庭地址可能有街道、区县、省市、国家等组成，这种属性被归类为组合，反之归类为简单

在 ER 图中属性使用椭圆形的标签表示，并且连接到它所属的实体上。主键属性加下划线标示。组合属性连接到对应的椭圆形组合属性上，多值属性使用双椭圆表示，如下图：

![](https://s2.ax1x.com/2019/10/02/udxr7j.png)




2019-10-03 更新



#### 关系的呈现

实体可以参与其他实体的关系，比如，一个客户可以购买商品，学生可以选择课程

和实体一样，关系也能有属性，比如我们能够在客户实体之间定义一个销售关系

关系的每一边都能出现不同数量的实体，比如，每个客户都可以买任意数量的产品，每一个产品也能被任意数量的客户购买，这种就是多对多关系。当然也有一对多关系，比如一个人会有多个信用卡，而每张信用卡只会属于某一个人。个人对于信用卡来说就是多对一的关系。通常使用 1:1，1:N，M:N 来表示一对一，一对多，多对多关系

下面是实体和关系的 ER 图
![](https://s2.ax1x.com/2019/10/03/u0gtNd.png)



#### 部分和全部参与

实体之间的关系可以是可选，也可以是必须的。比如只有当一个人购买了产品后才把他当作客户，也可以认为客户是购买了产品的个人。在第一种情况中，客户实体全部参与了购买产品的关系，即全部参与，第二种情况只有部分购买了产品的个人才参与到产品购买关系，即部分参与



#### 实体还是属性？

经常会遇到这样的情况：想知道一个项是属性还是一个单独的实体，比如邮件地址可以认为是一个实体，也可以认为是一个属性。当我们有疑惑的时候可以参照下面的原则

- 该项是不是与数据库直接相关的
  与数据库直接相关的为实体，而对它们的描述为属性

- 这个项是否有它自己的组件
  如果是，我们需要找的另一种方式来呈现这些组件，使用一个单独的实体通常是更好的解决方案
  
- 对象是否有多个实例
  如果有，必须找的一组方式去存储每个实例数据。最清晰的方式是使用一个单独的实体来呈现这个对象

- 对象是否经常不存在或者未知
  如果是，使用单独的实体会比做为属性更为高效

   










